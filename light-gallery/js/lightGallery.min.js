!function(e){"use strict";e.fn.lightGallery=function(t){var i,a,l,n,s,o,d,r,h,c,u,m={mode:"slide",useCSS:!0,cssEasing:"ease",easing:"linear",speed:600,addClass:"",closable:!0,loop:!1,auto:!1,pause:4e3,escKey:!0,controls:!0,hideControlOnEnd:!1,preload:1,showAfterLoad:!0,selector:null,index:!1,lang:{allPhotos:"All photos"},counter:!1,exThumbImage:!1,thumbnail:!0,showThumbByDefault:!1,animateThumb:!0,currentPagerPosition:"middle",thumbWidth:100,thumbMargin:5,mobileSrc:!1,mobileSrcMaxWidth:640,swipeThreshold:50,enableTouch:!0,enableDrag:!0,vimeoColor:"CCCCCC",videoAutoplay:!0,videoMaxWidth:"855px",dynamic:!1,dynamicEl:[],onOpen:function(){},onSlideBefore:function(){},onSlideAfter:function(){},onSlideNext:function(){},onSlidePrev:function(){},onBeforeClose:function(){},onCloseAfter:function(){}},f=e(this),v=this,p=null,b=0,g=!1,C=!1,y=void 0!==document.createTouch||"ontouchstart"in window||"onmsgesturechange"in window||navigator.msMaxTouchPoints,w=!1,T=!1,x=!1,S=e.extend(!0,{},m,t),G={init:function(){f.each(function(){var t=e(this);S.dynamic?(p=S.dynamicEl,b=0,d=b,q.init(b)):(p=null!==S.selector?e(S.selector):t.children(),p.on("click",function(i){p=null!==S.selector?e(S.selector):t.children(),i.preventDefault(),i.stopPropagation(),b=p.index(this),d=b,q.init(b)}))})}},q={init:function(){g=!0,this.structure(),this.getWidth(),this.closeSlide(),this.autoStart(),this.counter(),this.slideTo(),this.buildThumbnail(),this.keyPress(),S.index?(this.slide(S.index),this.animateThumb(S.index)):(this.slide(b),this.animateThumb(b)),S.enableDrag&&this.touch(),S.enableTouch&&this.enableTouch(),setTimeout(function(){i.addClass("opacity")},50)},structure:function(){e("body").append('<div id="lightGallery-outer" class="'+S.addClass+'"><div id="lightGallery-Gallery"><div id="lightGallery-slider"></div><a id="lightGallery-close" class="close"></a></div></div>').addClass("lightGallery"),a=e("#lightGallery-outer"),i=e("#lightGallery-Gallery"),S.showAfterLoad===!0&&i.addClass("showAfterLoad"),l=i.find("#lightGallery-slider");var t="";if(S.dynamic)for(var s=0;s<S.dynamicEl.length;s++)t+='<div class="lightGallery-slide"></div>';else p.each(function(){t+='<div class="lightGallery-slide"></div>'});l.append(t),n=i.find(".lightGallery-slide")},closeSlide:function(){S.closable&&e("#lightGallery-outer").on("click",function(t){e(t.target).is(".lightGallery-slide")&&v.destroy(!1)}),e("#lightGallery-close").bind("click touchend",function(){v.destroy(!1)})},getWidth:function(){var t=function(){c=e(window).width()};e(window).bind("resize.lightGallery",t())},doCss:function(){var e=function(){for(var e=["transition","MozTransition","WebkitTransition","OTransition","msTransition","KhtmlTransition"],t=document.documentElement,i=0;i<e.length;i++)if(e[i]in t.style)return!0};return S.useCSS&&e()?!0:!1},enableTouch:function(){var t=this;if(y){var i={},a={};e("body").on("touchstart.lightGallery",function(e){a=e.originalEvent.targetTouches[0],i.pageX=e.originalEvent.targetTouches[0].pageX,i.pageY=e.originalEvent.targetTouches[0].pageY}),e("body").on("touchmove.lightGallery",function(e){var t=e.originalEvent;a=t.targetTouches[0],e.preventDefault()}),e("body").on("touchend.lightGallery",function(){var e=a.pageX-i.pageX,l=S.swipeThreshold;e>=l?(t.prevSlide(),clearInterval(u)):-l>=e&&(t.nextSlide(),clearInterval(u))})}},touch:function(){var t,i,a=this;e(".lightGallery").bind("mousedown",function(e){e.stopPropagation(),e.preventDefault(),t=e.pageX}),e(".lightGallery").bind("mouseup",function(e){e.stopPropagation(),e.preventDefault(),i=e.pageX,i-t>20?a.prevSlide():t-i>20&&a.nextSlide()})},isVideo:function(e,t){var i=e.match(/\/\/(?:www\.)?youtu(?:\.be|be\.com)\/(?:watch\?v=|embed\/)?([a-z0-9_\-]+)/i),a=e.match(/\/\/(?:www\.)?vimeo.com\/([0-9a-z\-_]+)/i),l=!1;return S.dynamic?"true"==S.dynamicEl[t].iframe&&(l=!0):"true"==p.eq(t).attr("data-iframe")&&(l=!0),i||a||l?!0:void 0},loadVideo:function(e,t){var i=e.match(/\/\/(?:www\.)?youtu(?:\.be|be\.com)\/(?:watch\?v=|embed\/)?([a-z0-9_\-]+)/i),a=e.match(/\/\/(?:www\.)?vimeo.com\/([0-9a-z\-_]+)/i),l="",n="";return i?(n=S.videoAutoplay===!0&&C===!1?"?autoplay=1&rel=0&wmode=opaque":"?wmode=opaque",l='<iframe class="object" width="560" height="315" src="//www.youtube.com/embed/'+i[1]+n+'" frameborder="0" allowfullscreen></iframe>'):a?(n=S.videoAutoplay===!0&&C===!1?"autoplay=1&":"",l='<iframe class="object" id="video'+t+'" width="560" height="315"  src="http://player.vimeo.com/video/'+a[1]+"?"+n+"byline=0&portrait=0&color="+S.vimeoColor+'" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>'):l='<iframe class="object" frameborder="0" src="'+e+'"  allowfullscreen="true"></iframe>','<div class="video_cont" style="max-width:'+S.videoMaxWidth+' !important;"><div class="video">'+l+"</div></div>"},addHtml:function(t){var i=null;if(i=S.dynamic?S.dynamicEl[t]["sub-html"]:p.eq(t).find("div.lg-sub-html").html(),"undefined"!=typeof i&&null!==i){var a=i.substring(0,1);i="."==a||"#"==a?e(i).html():i,n.eq(t).append(i)}},preload:function(e){for(var t=e,i=0;i<=S.preload&&!(i>=p.length-e);i++)this.loadContent(t+i,!0);for(var a=0;a<=S.preload&&!(0>t-a);a++)this.loadContent(t-a,!0)},loadObj:function(e,t){var i=this;n.eq(t).find(".object").on("load error",function(){n.eq(t).addClass("complete")}),e===!1&&(n.eq(t).hasClass("complete")?i.preload(t):n.eq(t).find(".object").on("load error",function(){i.preload(t)}))},loadContent:function(t,i){{var a,l=this;p.length-t}S.preload>p.length&&(S.preload=p.length),a=S.mobileSrc===!0&&c<=S.mobileSrcMaxWidth?S.dynamic?S.dynamicEl[t].mobileSrc:p.eq(t).attr("data-responsive-src"):S.dynamic?S.dynamicEl[t].src:p.eq(t).attr("data-src");var s=0;i===!0&&(s=S.speed+400),"undefined"!=typeof a&&""!==a?l.isVideo(a,t)?setTimeout(function(){n.eq(t).hasClass("loaded")||(n.eq(t).prepend(l.loadVideo(a,t)),l.addHtml(t),n.eq(t).addClass("loaded"),S.auto&&S.videoAutoplay===!0&&clearInterval(u)),l.loadObj(i,t)},s):setTimeout(function(){n.eq(t).hasClass("loaded")||(n.eq(t).prepend('<img class="object" src="'+a+'" />'),l.addHtml(t),n.eq(t).addClass("loaded")),l.loadObj(i,t)},s):setTimeout(function(){if(!n.eq(t).hasClass("loaded")){var a=null;if(a=S.dynamic?S.dynamicEl[t].html:p.eq(t).attr("data-html"),"undefined"!=typeof a&&null!==a){var s=a.substring(0,1);a="."==s||"#"==s?e(a).html():a}"undefined"!=typeof a&&null!==a&&n.eq(t).append('<div class="video_cont" style="max-width:'+S.videoMaxWidth+' !important;"><div class="video">'+a+"</div></div>"),l.addHtml(t),n.eq(t).addClass("loaded complete"),S.auto&&S.videoAutoplay===!0&&clearInterval(u)}l.loadObj(i,t)},s)},counter:function(){if(S.counter===!0){var t=e("#lightGallery-slider > div").length;i.append("<div id='lightGallery_counter'><span id='lightGallery_counter_current'></span> / <span id='lightGallery_counter_all'>"+t+"</span></div>")}},buildThumbnail:function(){if(S.thumbnail===!0&&p.length>1){var t=this,a="";S.showThumbByDefault||(a='<span class="close ib"><i class="bUi-iCn-rMv-16" aria-hidden="true"></i></span>'),i.append('<div class="thumb_cont"><div class="thumb_info">'+a+'</div><div class="thumb_inner"></div></div>'),r=i.find(".thumb_cont"),s.after('<a class="cLthumb"></a>'),s.parent().addClass("hasThumb"),i.find(".cLthumb").bind("click touchend",function(){i.addClass("open"),t.doCss()&&"slide"===S.mode&&(n.eq(b).prevAll().removeClass("nextSlide").addClass("prevSlide"),n.eq(b).nextAll().removeClass("prevSlide").addClass("nextSlide"))}),i.find(".thumb_cont .close").bind("click touchend",function(){i.removeClass("open")});var l,o=i.find(".thumb_info"),d=i.find(".thumb_inner"),c="";if(S.dynamic)for(var m=0;m<S.dynamicEl.length;m++)l=S.dynamicEl[m].thumb,c+='<div class="thumb"><img src="'+l+'" /></div>';else p.each(function(){l=S.exThumbImage===!1||"undefined"==typeof e(this).attr(S.exThumbImage)||null===e(this).attr(S.exThumbImage)?e(this).find("img").attr("src"):e(this).attr(S.exThumbImage),c+='<div class="thumb"><img src="'+l+'" /></div>'});if(d.append(c),h=d.find(".thumb"),h.css({"margin-right":S.thumbMargin+"px",width:S.thumbWidth+"px"}),S.animateThumb===!0){var f=p.length*(S.thumbWidth+S.thumbMargin);i.find(".thumb_inner").css({width:f+"px",position:"relative","transition-duration":S.speed+"ms"})}h.bind("click touchend",function(){w=!0;var i=e(this).index();h.removeClass("active"),e(this).addClass("active"),t.slide(i),t.animateThumb(i),clearInterval(u)}),o.prepend('<span class="ib count">'+S.lang.allPhotos+" ("+h.length+")</span>"),S.showThumbByDefault&&i.addClass("open")}},animateThumb:function(e){if(S.animateThumb===!0){var t,a=i.find(".thumb_cont").width();switch(S.currentPagerPosition){case"left":t=0;break;case"middle":t=a/2-S.thumbWidth/2;break;case"right":t=a-S.thumbWidth}var l=(S.thumbWidth+S.thumbMargin)*e-1-t,n=p.length*(S.thumbWidth+S.thumbMargin);l>n-a&&(l=n-a),0>l&&(l=0),this.doCss()?i.find(".thumb_inner").css("transform","translate3d(-"+l+"px, 0px, 0px)"):i.find(".thumb_inner").animate({left:-l+"px"},S.speed)}},slideTo:function(){var e=this;S.controls===!0&&p.length>1&&(i.append('<div id="lightGallery-action"><a id="lightGallery-prev"></a><a id="lightGallery-next"></a></div>'),s=i.find("#lightGallery-prev"),o=i.find("#lightGallery-next"),s.bind("click",function(){e.prevSlide(),clearInterval(u)}),o.bind("click",function(){e.nextSlide(),clearInterval(u)}))},autoStart:function(){var e=this;S.auto===!0&&(u=setInterval(function(){b=b+1<p.length?b:-1,b++,e.slide(b)},S.pause))},keyPress:function(){var t=this;e(window).bind("keyup.lightGallery",function(e){e.preventDefault(),e.stopPropagation(),37===e.keyCode&&(t.prevSlide(),clearInterval(u)),38===e.keyCode&&S.thumbnail===!0&&p.length>1?i.hasClass("open")||(t.doCss()&&"slide"===S.mode&&(n.eq(b).prevAll().removeClass("nextSlide").addClass("prevSlide"),n.eq(b).nextAll().removeClass("prevSlide").addClass("nextSlide")),i.addClass("open")):39===e.keyCode&&(t.nextSlide(),clearInterval(u)),40===e.keyCode&&S.thumbnail===!0&&p.length>1&&!S.showThumbByDefault?i.hasClass("open")&&i.removeClass("open"):S.escKey===!0&&27===e.keyCode&&(!S.showThumbByDefault&&i.hasClass("open")?i.removeClass("open"):v.destroy(!1))})},nextSlide:function(){var e=this;b=n.index(n.eq(d)),b+1<p.length?(b++,e.slide(b)):S.loop?(b=0,e.slide(b)):S.thumbnail===!0&&p.length>1&&!S.showThumbByDefault?i.addClass("open"):(n.eq(b).find(".object").addClass("rightEnd"),setTimeout(function(){n.find(".object").removeClass("rightEnd")},400)),e.animateThumb(b),S.onSlideNext.call(this,v)},prevSlide:function(){var e=this;b=n.index(n.eq(d)),b>0?(b--,e.slide(b)):S.loop?(b=p.length-1,e.slide(b)):S.thumbnail===!0&&p.length>1&&!S.showThumbByDefault?i.addClass("open"):(n.eq(b).find(".object").addClass("leftEnd"),setTimeout(function(){n.find(".object").removeClass("leftEnd")},400)),e.animateThumb(b),S.onSlidePrev.call(this,v)},slide:function(t){var i=this;if(C?(setTimeout(function(){i.loadContent(t,!1)},S.speed+400),l.hasClass("on")||l.addClass("on"),this.doCss()&&""!==S.speed&&(l.hasClass("speed")||l.addClass("speed"),x===!1&&(l.css("transition-duration",S.speed+"ms"),x=!0)),this.doCss()&&""!==S.cssEasing&&(l.hasClass("timing")||l.addClass("timing"),T===!1&&(l.css("transition-timing-function",S.cssEasing),T=!0)),S.onSlideBefore.call(this,v)):i.loadContent(t,!1),"slide"===S.mode){var a=null!==navigator.userAgent.match(/iPad/i);!this.doCss()||l.hasClass("slide")||a?this.doCss()&&!l.hasClass("useLeft")&&a&&l.addClass("useLeft"):l.addClass("slide"),this.doCss()||C?!this.doCss()&&C&&l.animate({left:100*-t+"%"},S.speed,S.easing):l.css({left:100*-t+"%"})}else"fade"===S.mode&&(this.doCss()&&!l.hasClass("fadeM")?l.addClass("fadeM"):this.doCss()||l.hasClass("animate")||l.addClass("animate"),this.doCss()||C?!this.doCss()&&C&&(n.eq(d).fadeOut(S.speed,S.easing),n.eq(t).fadeIn(S.speed,S.easing)):(n.fadeOut(100),n.eq(t).fadeIn(100)));if(t+1>=p.length&&S.auto&&S.loop===!1&&clearInterval(u),n.eq(d).removeClass("current"),n.eq(t).addClass("current"),this.doCss()&&"slide"===S.mode&&(w===!1?(e(".prevSlide").removeClass("prevSlide"),e(".nextSlide").removeClass("nextSlide"),n.eq(t-1).addClass("prevSlide"),n.eq(t+1).addClass("nextSlide")):(n.eq(t).prevAll().removeClass("nextSlide").addClass("prevSlide"),n.eq(t).nextAll().removeClass("prevSlide").addClass("nextSlide"))),S.thumbnail===!0&&p.length>1&&(h.removeClass("active"),h.eq(t).addClass("active")),S.controls&&S.hideControlOnEnd&&S.loop===!1&&p.length>1){var r=p.length;r=parseInt(r)-1,0===t?(s.addClass("disabled"),o.removeClass("disabled")):t===r?(s.removeClass("disabled"),o.addClass("disabled")):s.add(o).removeClass("disabled")}d=t,C===!1?S.onOpen.call(this,v):S.onSlideAfter.call(this,v),setTimeout(function(){C=!0}),w=!1,S.counter&&e("#lightGallery_counter_current").text(t+1),e(window).bind("resize.lightGallery",function(){setTimeout(function(){i.animateThumb(t)},200)})}};return v.isActive=function(){return g===!0?!0:!1},v.destroy=function(t){g=!1,t="undefined"!=typeof t?!1:!0,S.onBeforeClose.call(this,v);var l=C;C=!1,T=!1,x=!1,w=!1,clearInterval(u),t===!0&&p.off("click touch touchstart"),e(".lightGallery").off("mousedown mouseup"),e("body").off("touchstart.lightGallery touchmove.lightGallery touchend.lightGallery"),e(window).off("resize.lightGallery keyup.lightGallery"),l===!0&&(i.addClass("fadeM"),setTimeout(function(){a.remove(),e("body").removeClass("lightGallery")},500)),S.onCloseAfter.call(this,v)},G.init(),this}}(jQuery);
